{% extends "base.html" %}

{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SD-EPP | Grabaciones</title>
    {# Se incluye la misma hoja de estilo para mantener el diseño #}
    <link rel="stylesheet" href="{% static 'css/prueba.css' %}">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="dashboard-container">
        
        {# Sidebar y Header: Asumo que esta estructura es la misma que en inicio.html y base.html #}
        {# Por simplicidad, copio la estructura del sidebar y header de inicio.html #}
        
        <aside class="sidebar">
            <div class="logo-area">
                <img src="{% static 'img/logo.png' %}" alt="Logo SD-EPP" class="sidebar-logo">
            </div>

            <div class="sidebar-section">
                <p class="section-title">Navegación Principal</p>
                
                <a href="{% url 'deteccion:inicio' %}" class="nav-button">
                    <i class="fas fa-chart-line"></i>
                    <span>Inicio</span>
                </a>
                
                <a href="{% url 'deteccion:lista_empleados' %}" class="nav-button">
                    <i class="fas fa-users"></i>
                    <span>Lista Empleados</span>
                </a>
                
                <a href="{% url 'deteccion:crear_empleado' %}" class="nav-button" data-target="create-user">
                    <i class="fas fa-user-plus"></i>
                    <span>Crear Empleado</span>
                </a>
            </div>

            <div class="sidebar-section">
                <p class="section-title">Módulos</p>
                <button class="nav-button" data-target="statistics">
                    <i class="fas fa-chart-bar"></i>
                    <span>Estadísticas</span>
                </button>
                <button class="nav-button" data-target="reports">
                    <i class="fas fa-file-alt"></i>
                    <span>Reportes</span>
                </button>
                <button class="nav-button" data-target="epp">
                    <i class="fas fa-hard-hat"></i>
                    <span>EPP</span>
                </button>
                <button class="nav-button" data-target="incidents">
                    <i class="fas fa-exclamation-triangle"></i>
                    <span>Registro de incidencias</span>
                </button>
                <button class="nav-button" data-target="detection">
                    <i class="fas fa-camera"></i>
                    <span>Detección EPP</span>
                </button>
            </div>
        </aside>

        <main class="main-content">
           <header class="main-header">
                <div class="user-info">
                    <img src="{% static 'img/perfil.jpg' %}" alt="Foto de Perfil" class="user-profile-pic"> 
                    <span>Bienvenido <strong>Jonathan Orosco</strong></span>
                </div>
                <div class="header-actions">
                    <button class="notification-button">
                        <i class="fas fa-bell"></i>
                        <span class="notification-badge">3</span>
                    </button>
                    
                    <form id="logout-form" action="{% url 'deteccion:logout' %}" method="post" style="display: none;">
                        {% csrf_token %}
                    </form>
                    <button type="submit" class="logout-button" onclick="document.getElementById('logout-form').submit(); return false;">
                        <i class="fas fa-sign-out-alt"></i>
                        <span>Cerrar sesión</span>
                    </button>
                </div>
            </header>
            
            {# ========================================================================= #}
            {# CONTENIDO ESPECÍFICO DE GRABACIONES #}
            {# ========================================================================= #}
            <div class="content-area">
                
                {# Card principal para la tabla de grabaciones #}
                <div class="card notifications-card">
                    <h2><i class="fas fa-video"></i> Archivo de Grabaciones</h2>
                    
                    {# Tabla de grabaciones con el mismo estilo que la tabla de notificaciones #}
                    <table>
                        <thead>
                            <tr>
                                <th>FECHA</th>
                                <th>HORA INICIO</th>
                                <th>DURACIÓN</th>
                                <th>EVENTO DETECTADO</th>
                                <th>ACCIÓN</th>
                            </tr>
                        </thead>
                        <tbody>
                            {# Fila de ejemplo 1: Alerta de alto riesgo #}
                            <tr>
                                <td>2025-11-02</td>
                                <td>10:23 AM</td>
                                <td>00:01:45</td>
                                <td><span class="alert-badge alert-high">Casco ausente</span></td>
                                <td><button class="control-button"><i class="fas fa-play"></i> Ver</button></td>
                            </tr>
                            {# Fila de ejemplo 2: Alerta de riesgo medio #}
                            <tr>
                                <td>2025-11-02</td>
                                <td>09:52 AM</td>
                                <td>00:03:10</td>
                                <td><span class="alert-badge alert-medium">No uso de guantes</span></td>
                                <td><button class="control-button"><i class="fas fa-play"></i> Ver</button></td>
                            </tr>
                            {# Fila de ejemplo 3: Grabación programada (sin alerta específica) #}
                            <tr>
                                <td>2025-11-01</td>
                                <td>16:00 PM</td>
                                <td>00:15:00</td>
                                <td><span class="alert-badge" style="background-color: rgba(52, 152, 219, 0.1); color: var(--secondary);">Rutina</span></td>
                                <td><button class="control-button"><i class="fas fa-play"></i> Ver</button></td>
                            </tr>
                            {# Fila de ejemplo 4: Alerta de alto riesgo #}
                            <tr>
                                <td>2025-10-31</td>
                                <td>08:15 AM</td>
                                <td>00:00:58</td>
                                <td><span class="alert-badge alert-high">Botas ausentes</span></td>
                                <td><button class="control-button"><i class="fas fa-play"></i> Ver</button></td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                {# Espacio para futuros controles de paginación o filtros si se necesitaran #}
            </div>
            
        </main>
    </div>

    {# Scripts (copiados de inicio.html para mantener la funcionalidad básica) #}
    <script>
        document.querySelectorAll('.nav-button').forEach(button => {
            button.addEventListener('click', function() {
                document.querySelectorAll('.nav-button').forEach(btn => {
                    btn.classList.remove('active');
                });
                this.classList.add('active');
            });
        });
        
        document.querySelector('.notification-button').addEventListener('click', function() {
            alert('Mostrando notificaciones');
        });
        
        // Funcionalidad para los botones de la tabla (ejemplo)
        document.querySelectorAll('.control-button').forEach(button => {
            if (button.textContent.includes('Ver')) {
                 button.addEventListener('click', function() {
                    alert('Reproduciendo grabación...');
                });
            }
        });
    </script>
</body>
</html>